importClass(android.content.Context);
// console.show()
// console.setPosition(0, 1000);
//可收取的能量球图片,暂时用不到了
// var availableImgBase64 = "iVBORw0KGgoAAAANSUhEUgAAADwAAAAgCAIAAADBiozFAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAACKFJREFUeJy9WH9v3MYRnZkl76f1I4pjyUaMAg0aNECBfIF8uH64/lUUaAu0TdM6bhxZjWVL8kk63R155E7fznLJPclp/whSij6Te9zl27dv3sxe8dvfvSJZqLsi91ZG30r5vZSvpXhbuEsnt8q1Z6/sHbfCXliZ1CspsV0TztAUWsK1Y5y4tBs7NN2JEDPu0hfWyKTDTXj6AxcaPpi71nAUMvkzl/+i8lSLH8RdiLsStyjc0slKuPLkvfXWCMW6YQhvTcAH6OnNbMjUiWaY4ysNH8c3a5hhmG/oF7Fw//SDCzyYw42XhZv+nsd/ofKllm+YGuHWceOkdeQDMRhWUw+jNg4A8gPTTBKgdPThUkQc/lEpYJydAVPMnKjx1Gg44ywGygfEHzo+8CVTwZM/cHFGxQXLnVBgTiIqW3ZgKii8E+0BgvFdxNughLjo3egA6mg80kczeTrmo5L3HY1arRtaVnq50XcbuvIEvbVYKjbd/HfEP3YUVL4gd8OyYagWKA3QsHCG2xpjezjEpNm1GNn2pBQ0mfDHM3q2z5/N5BlwO5q2tKn0/UrPlvodqavpqqF1YJ/zJX/AJnfB8GOg3wAuY+qGJuAzCGFMjrEShnAx7AZiOp6SUtFLSprP+fkBf3Egn8/42VgeOx23VNW8GOuR+DEeu9UtRNJy04VHHw00oOyFfq+lf7hgW6xIcA+aE6lRU4FUUXmwlPniYl4jPgTiY/lqCprlyPEM/ZT8RJ+UeljQHuaw9TctrT1tzHe0f0eM0d0xuY8/7sIrMe0SYmdPRMSSmO7pFOae6SEyubthRCCNIOKpnMzlFyM5KnjmeBSfUp5CDq1AJ5cj2q907MmhgTjiSPEdjWLwHdUdmoY5FAX3Ou5wSOcJAa3gjx0iTDrYYTAfrGBrQYmJmWkjBGVU8HQkByP5KCJGo60SPgvP85L2RnRYyqzQsgnvbDW9MffHAXYSfVwP7ZvYQMewS6ANJht5XECmI94rcdKcGbah0GhFV5VeaXBxCLTtu4t1lmB5wt0UfRqVBasarDCumEWIZqBzWScwXc4ycedSLCS9sjNdvBUCDstdljSb0ckjfj6X52M5hjtiiJoWN/6bhf97TRctL7HKGvDBDbaeN57uGl6ib5wFBWNGRoUUKiRXxSS1xpNkU9WMW87zhw4tvV/RDujoAEZG4ZzjEubqeFzofEwf7fMvD/jzffnV1H1ayCPMvNKLgmbgeIlrarZUdYwi4cOP6e2GzvC6kmDSpcKVEYnUbummpstunugXQGdhQUnUlAE3VJFj4R3/A07LZAy4oxHvj/lwwkcTfjymkyk9ncrxlB+bTB+BP4wFizh0XzgpodOFVi3dxKRO3Da0WNI3hZ/s0a8n9LSkA0OE9tWazm7pH7f6t5rPiTYygFTOwnqHbDUVJRXktg1NTwoelzyDcIF1yp9M+MmUjyf8dEzHmAbCC8RL0Hl4V0HTKZ8A4h39s/QTSbJjaltarulUgs1tt3Q5gjcjBHHNtys6vaMXK37R0jXkwcmp8kMttfU8p4plt6Ky/4ux7I35AJlsEuCeGOInQD/ij0GV8MSqCBNA536uZGkJpjaHlrjXHUorXleByFp1W9Pbkg6djjzXW73Z0JsNn9b8RmkdKpw+BJNp4pRMytrFXvJmHRYhJBdAnPMzhNpcPp3QyYiPIICS5xZMLuo1+LqoBQPbcC34Q5CZlPsqDk/VLbUVr4O49TtIXxgZsW512Uo4lTdQOB6UyDRHXKSDU3cUeHuRZCWaJk8J5dCR/Ab1zUwCxwUdFLxX0ByaicVcWjRRhUt40i0qnlovVvqy0nPPqy5EOvHhE13aFiU3r7ZaCiMW4So15hNMg7v463NCMjLtHSMVjNpXELGaTvWsyePIfTmVT8qg3RnrCNxISArw05YCK/hDroQ9B7eCNzd6DcQ3+nVFr2EFqbrqamiD7gPl2oTwhn+GmXsLVr+ToROF3V0mWTU6NZtb/hXOYk8+QwgGdYZQK+zkUJDYUpgYNp63W71teNHoVU3nd/Tyjr+FDygZ06x5mrDVNqOzAjwmjaH8px0EYSKZBijz5ty5Y4vvC6YJH2MRE/2lLRISdR28wpJCi3xBt1t6XymC6WxDryvB5zkaYV62g0qjp7yVtgU7W5j71PYJT5m4H2AnpyQ1B5/RrG8Bmu27xgzfWf5CaVHZBstv6RoZAVaw1Ys1n631FIgxgZbvjEu9txXToRBPbN0ri7VrG2yBbSW4q486xBYkmgSlEr5NyVwLDT4Q6RFbgS3K9kaNXV1U9MOG/o3Pmi8bet/wNYgH/V6TjnNGh5qBk2A07s2Y+oJsmIR0dFvlZfu3OP9MIdqJxHr3tXGh3ERqNBRD64ZumsDue2TdisHxuZ0XyMPwCkUJgXIiRJVqRqTsyqO31ZzmB9V4H3+R647gfL+eddFUX5k8rKYhKzi3qBxw1qF+ANB3wJrYXYJ+5YZ6SWTb7A4u7egxFkM+SWUntvr+nAHJeivv4E3t0fnCWgA0MkUDTMhbK3q1oVNUPJAE8jAoRzrw5q9hV3dPsjGTxWXtJ5Gn5vSeYR+Ub0x2I64vnPLyOn+4//2EQnkeSrDFWs/u6NWavq9MDCh9PN/ZpqixjGioEjbZ4U/jbwyehsYcZf7u+1vV3b3t7j6la+mNj6MW7ZkCdILaG/pryBcMI1u0tAobE5hJSGDJjGKIaBwlpauEJe1hgk1yztBPPvJZDXvEa/9HqGJJL1GgIQp90O62S+ApoDiFAaeY7VTQY1fKtz8/91Fc05+CiPktRIKanWxznk/yXu7liD9PXPQhFf6soG/165oh4pWGMnfwWsrjJGQ47mnmzoAzy/1/cdyBrvgd6mCWJvvRLpUmmqqKDmr/syHpTwQZd/H3rC2rTCgRNPTInixaXsOApc/Fea+dH20fBvcHjn6Q//30vc3sQ2+J7vGwleg/T8WdcNJqG5cAAAAASUVORK5CYII=";
// var avalableImg = images.fromBase64(availableImgBase64);

var shieldBase64 = "iVBORw0KGgoAAAANSUhEUgAAABgAAAARCAIAAABIGvtnAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAA0RJREFUeJwVlFmSLCcMRZEQQ041vLbD9na9Gy/Ce3H4z/Wqh6zOIhMQkim+CIK43HskQX/+/VeuoTbWJkarVuJ9qTUYIjUEYqUfa7O2ki/WpxB2654+5HHW0xXmCQ3knEd6fNcj28IIYAmcad60WcFxFzCgrWsBIKmimmaUGmMpmDYpe+vPOAM2ZGFLTWxlX5u36ABFlUA9GAe2Sl9dpsuTxKhxQOe8UUmJ95cKzyO10p8xtdbuv3tzoBEgKlRRacwAOsRYWumhEIQ8h1GGKXsvpllpgXcBFTTOotq+umdEku5DgbmpZm9tGOyx51qdNGNR4lDmc1kWjsNB1rSMsdqWB2tNCOACA4IxTGAYugyAc9TTBd8dMphCWNky0TEt9XKp80nIFRAtJuDTGGvgJeCEgQW2Z6WXN2gAEkmHgcbRINTga843UnbxOJ3x7Q2GCZrUnJow9vI2tt57S6Mql+OUngdFDzu9uLw4eT3PGII9Zn2/3cGWOMplifPYE8OWyvZdt5W3R3cbhmGwbkBEaT9aTTRNeDx154aarXL0fllklkYmgz18wDh1Mi5vsr7z50ftl0vuYDEM6OOr+q1euQaaBr8H4KM13mvJnB0qdDR//B7B9G0vNx3f+lhx/em3VaVHBzPOMF/UxlwqpKPs2dDgbfDgO5jaEWx7gpx6V+/TtXcm5mLSN3594GN1+zYqt24zzu3yZk4/Dhc/UymppL06Ql8pVPQiXEo99hS2LTryITrRtm/2692833sr924I1vcOLz7yOOH0Go4msnPNykjGH/OvRTDLPeXkvx+z5GtX1xG2/Hh+2bzFJhN4gpabrNHXYdDRe2A4Dq0raA7UHNHgRsfaUSg++8RkKtX22fnn37UaIznwETR3Vjm6EiKfr/DjLUwTtSqPz/L9xTU57bDLYb1z8zyjBDSaHse+3fJh82EsDQTRsLR2BF+GpZ0ufH7D0wWsbx/37eetrF+W91l0pPttXy6mj98wk0pV7aSSZEK5okbspqCPWIoDzyddLjAvFqA91ny/pXWFesxGz0Ym+nzvCWx0Pgacl/5X1KasnUfqn0YxL8nkh7KczHSycbTk7fPJ9//K5we2fLL4G+gve7P/A8EOQb4JpgQoAAAAAElFTkSuQmCC";
var shieldImg = images.fromBase64(shieldBase64);
//找能量 小手 图片
var findImgBase64 = "data:image/png;base64,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";
var findImg = images.fromBase64(findImgBase64);

//屏幕高度
var height = device.height
var width = device.width

var pwd = hamibot.env;
log(pwd);
//解锁屏幕
var pwd = pwd.input;
if (pwd) {
  unlockIfNeed();
}else{
	log("无密码不解锁");
}

//无障碍判定
// try {
//     auto.waitfor();
// } catch (error) {
//     toast("请手动开启无障碍并授权给hamibot");
//     sleep(2000);
//     exit();
// }

// alert("使用说明", "请确保hamibot有无障碍权限。稍后请允许截屏权限。");
toast("开始执行,请赋予截屏权限")
// threads.start(function() {
    //在新线程执行的代码
  	//启用按键监听
// 		events.observeKey();
//     while(true) {
    //监听音量上键按下
//       events.onKeyDown("volume_up", function(event) {
//           toastLog("音量上键被按下了");
//         	exit();
//       });
//     }
// });



//请求横屏截图
requestScreenCapture(false);
sleep(1000);

setScreenMetrics(1080, 1920);



//判断是否已经启动了蚂蚁森林
if(!textContains("我的大树养成记录").exists()){
  toastLog("开始启动蚂蚁森林")
  // 启动蚂蚁森林
  app.startActivity({ 
     action: "android.intent.action.VIEW", 
     data:"alipays://platformapi/startapp?appId=60000002", 
     packageName: "com.eg.android.AlipayGphone", 
  });

  //暂停5秒,等在启动完成
  // sleep(5000);
  while(!textContains("我的大树养成记录").exists()){
  //等待启动完成
  };
  toastLog("蚂蚁森林启动成功")
}

//监测是否有弹窗,有的话关掉
var closeBtn = text("关闭").findOne(1000);
if(closeBtn!=null){
	closeBtn.click();
}

var next = false;
do{
  
  //找 我的大树养成记录 控件, 判断是否收取结束
  var w = textContains("我的大树养成记录").findOne(4000);
//   console.log("找头像");
  if (w == null) {
    //收取结束
    console.log("没找到头像");
    break;
  }else{
//     console.log("找到头像");
  }
  
  //判断 保护罩 
  if(isShield()){
    toastLog("撞到护盾,下一个");
  }else{
    getEnergy();
   
//     //在截图中找可收取的能量
//     var result = images.matchTemplate(captureScreen(), avalableImg,{region: [0, 0, width, height/2],threshold:0.7});
//     if (result && result.matches && result.matches[0]) {
//         //找到啦 收取
//         toast("正在收取");
//         result.matches.forEach(match => {
//           click(match.point.x,match.point.y);
//   //         sleep(2000);
//           console.log("收取成功");
//   //         console.log("point = " + match.point + ", similarity = " + match.similarity);
//         });
//         toast("收取结束,开始寻找下一个好友");
//     }else{
//       toast("没找可收取到能量球");
//     }
  }
  
  
  //找下一个
  var nextResult = images.findImage(captureScreen(), findImg,{threshold:0.7});
  
  next = nextResult?true:false;
  
  if(next){
//   	console.log("找到下一个好友,进入森林");
    click(nextResult.x+200,nextResult.y);
    sleep(1000);
  }else{
   	console.log("没有好友了");
  }
  
}while(next);
// threads.shutDownAll();
alert("本次收取结束");


//循环点击能量球可能的位置
function getEnergy() {
  toastLog("正在收取能量");
  sleep(1000);
  var x = 150,y=800;
  for (;x<=width/2;) {
    click(x, y);
    click(x, y);
//     sleep(50);
    x+=40;
    y-=30
  }
  
  for (x=width/2,y=550;x<width-100;) {
    click(x, y);
    click(x, y);
//     sleep(50);
    x+=40;
    y+=20
  }
}

//判断好友森林是否有护盾
function isShield(){
	var titleobj = id("com.alipay.mobile.nebula:id/h5_tv_title").findOnce();
  var title = titleobj.text();
  //判断 保护罩 
  var shieldResult = images.findImage(captureScreen(), shieldImg,{threshold:0.7});
  //title等于蚂蚁森林 代表在自己的森林
  return title!="蚂蚁森林" && shieldResult;
}


/**
 * 手机是否锁屏
 */
function isLocked() {
    var km = context.getSystemService(Context.KEYGUARD_SERVICE);
    return km.isKeyguardLocked() && km.isKeyguardSecure();
}

/**
 * 解锁屏幕
 */
function unlockIfNeed() {
   	device.wakeUpIfNeeded();
    if (!isLocked()) {
      	log("没有锁屏无需解锁");
        return;
    }
    enterPwd();
    
    log("解锁完毕");
}
function enterPwd() {
    //判断是否已经上滑至输入密码界面
//     for (int = 0; i < 10; i++) {
//         if (!text(i).clickable(true).exists() && !desc(i).clickable(true).exists()) {
//             log("解锁屏幕失败");
//             exit();
//         }
//     }
  sleep(1000);
  log(width/2);
  swipe(width/2, height/2, width/2, 0, 500);
  
    //点击
    if (text(0).clickable(true).exists()) {
        for (var i = 0; i < pwd.length; i++) {
            a = pwd.charAt(i)
            sleep(200);
            text(a).clickable(true).findOne().click()
        }
    } else {
        for (var i = 0; i < pwd.length; i++) {
            a = pwd.charAt(i)
            sleep(200);
            desc(a).clickable(true).findOne().click()
        }
    }
}
